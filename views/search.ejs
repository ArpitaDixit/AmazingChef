<!DOCTYPE html>
<html>

<head>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/styles/mystyles1.css">
    <script src="/scripts/recipe.js" type="text/javascript"></script>
    <title>My First Website</title>
    <script>
        var recipes = JSON.parse('<%-JSON.stringify(recipes)%>');

        function init() {
            document.getElementById("notification").innerHTML = recipes.length + " recipes has been found.";
            if (recipes.length === 0) {
                return
            }
            var recipeContainer = document.getElementById("recipeContainer");
            recipeContainer.style.display = "flex";
            for (var i = 0; i < recipes.length; i++) {
                var recipe = recipes[i];
                var href = '<a href="' + recipe["href"] + '">';
                var img = '<img src="' + recipe['image']['source'] + '" style="height:150px"></a>';
                var div = document.createElement("div");
                div.id = recipe["recipe_name"];
                div.innerHTML = '<p>' + img + '<br>' + recipe['recipe_name'] + '</p>';
                div.setAttribute("id", i);
                recipe_name = recipe['recipe_name'];
                div.setAttribute("class", "recipe");
                div.setAttribute("onclick", "display_recipe(this)");
                recipeContainer.appendChild(div);
            }
        }

        function display_recipe(obj) {
            var recipe = recipes[obj.id];
            document.getElementById('recipe_name')
                .innerHTML = recipe['recipe_name'].replace("_", " ");
            init_img(recipe);
            init_ingredients(recipe);
            init_direction(recipe);

            var recipeDisplay = document.getElementById("recipeDisplay");

            if (recipeDisplay.style.display === "none") {
                recipeDisplay.style.display = "block";
            }
        }
    </script>
</head>

<body onload=init()>
    <div id="page">

        <p id="notification" align="center" font-size="30px"></p>

        <div id="recipeContainer" class="rounded-div" style="display: none">
        </div>

        <div id="recipeDisplay" class="rounded-div" style="display: none">
            <h2 id='recipe_name'></h2>
            <center><img id='recipe_img'></center>

            <div id='recipeContent'>

                <div id='ingredients' class="div-center">
                    <p><b>Ingredients</b></p>
                    <table id='ingredient_table' border="1">
                        <tr>
                            <th>Ingrdient</th>
                            <th>Quantity</th>
                            <th>Note</th>
                        </tr>
                    </table>
                </div>

                <div id='direction'>
                    <p><b>Direction</b></p>

                </div>

            </div>
        </div>

    </div>
</body>



</html>